var maxOutputLength = 1024;

module.exports = {
  /**
   * Truncates the  output to the specified length if exceeded separated
   * with an ellipsis.
   *
   * @param {String} output The output to truncate if too long
   * @param {Number} [maxLength] The maximum length. If not specified, then the global value maxOutputLength is used.
   */
  ellipsis: function truncateLogOutput(output, maxLength) {
    if (typeof(maxLength) === 'undefined') maxLength = maxOutputLength;
    if (! output) return(output);

    if (typeof(output) !== 'string') output = output.toString();
    var length = output.length;
    if ((! length) || (length < (maxLength + 3))) return(output);

    var prefix = Math.ceil((maxLength - 3)/2);
    var suffix = Math.floor((maxLength - 3)/2);
    return(output.slice(0, prefix)+ '...' +
           output.slice(length-suffix));
  }
};
